{"version":3,"sources":["../node_modules/cantil/src/utils/utils.js","../node_modules/cantil/src/utils/intersection-observer.js","../node_modules/cantil/src/utils/swipeable.js","../node_modules/cantil/src/cantil.js","index.js"],"names":["onDomReady","Promise","resolve","document","readyState","addEventListener","template","selector","query","content","cloneNode","once","callback","args","called","apply","observable","elements","init","queryAll","forEach","status","threshold","parseFloat","getAttribute","revealContentObserver","IntersectionObserver","entries","entry","isIntersecting","target","dispatchEvent","CustomEvent","unobserve","observe","getElements","swipeable","Number","startTouch","e","changedTouches","passive","dx","dy","clientX","clientY","adx","ady","map","Math","abs","detail","x","sign","y","Object","setPrototypeOf","NodeList","prototype","Array","HTMLCollection","querySelector","bind","querySelectorAll","window","Node","elem","from","flat","sibling","siblings","parentElement","children","filter","index","i","previousElementSibling","trigger","event","orderedBoxes","totalPrisioners","numberOfTries","boxes","button","prisionersInput","methodInput","simulationsInput","results","loop","succeed","position","j","random","allPrisionerSucceed","prisionerBoxes","prisionerSucceed","randomPosition","parseInt","length","splice","randomBoxes","result","slice","floor","calc","value","keys","successCount","onclick","disabled","startTime","performance","now","then","innerText","toFixed"],"mappings":"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","file":"src.745e6427.js","sourceRoot":"..\\src","sourcesContent":["// On Dom Ready\r\n// @stimulus https://github.com/stimulusjs/stimulus/blob/master/packages/%40stimulus/core/src/application.ts\r\nexport function onDomReady() {\r\n  return new Promise(resolve => (document.readyState === 'loading'\r\n    ? document.addEventListener('DOMContentLoaded', resolve)\r\n    : resolve()));\r\n}\r\n\r\n// Template helper\r\nexport function template(selector) {\r\n  return query(selector).content.cloneNode(true);\r\n}\r\n\r\n// Once\r\n// @vuejs https://github.com/vuejs/vue/blob/4de4649d9637262a9b007720b59f80ac72a5620c/src/shared/util.js\r\nexport function once(callback, ...args) {\r\n  let called = false;\r\n  \r\n  return function () {\r\n    if (!called) {\r\n      called = true;\r\n      callback.apply(this, args);\r\n    }\r\n  };\r\n}\r\n","// Interception observer\nexport const observable = {\n  elements: [],\n\n  // Init\n  init: selector => {\n    observable.elements = queryAll(selector || '[observable]');\n\n    observable.elements.forEach(observable => {\n      let status = false;\n      const threshold = parseFloat(observable.getAttribute('threshold') || 1);\n      const once = observable.getAttribute('once') !== null;\n\n      const revealContentObserver = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && !status) {\n            status = true;\n            entry.target.dispatchEvent(new CustomEvent('observed', entry));\n            if (once) {\n              revealContentObserver.unobserve(entry.target);\n            }\n          } else if (!entry.isIntersecting && status) {\n            status = false;\n            entry.target.dispatchEvent(new CustomEvent('unobserved', entry));\n          }\n        });\n      }, { threshold });\n\n      revealContentObserver.observe(observable);\n    });\n  },\n\n  // Get Elements\n  getElements() {\n    return observable.elements;\n  }\n};","// Swipeable\nexport const swipeable = {\n  elements: [],\n\n  // Init\n  init: selector => {\n    swipeable.elements = queryAll(selector || '[swipeable]');\n\n    swipeable.elements.forEach(swipeable => {\n      const threshold = Number(swipeable.getAttribute('threshold')) || 120;\n      let startTouch;\n      \n      // Touch Start Event\n      swipeable.addEventListener('touchstart', e => {\n        [startTouch] = e.changedTouches;\n      }, { passive: true });\n      \n      // Touch End Event\n      swipeable.addEventListener('touchend', e => {\n        const [dx, dy] = [\n          e.changedTouches[0].clientX - startTouch.clientX,\n          e.changedTouches[0].clientY - startTouch.clientY,\n        ];\n      \n        const [adx, ady] = [dx, dy].map(Math.abs);\n      \n        if (adx || ady) {\n          swipeable.dispatchEvent(new CustomEvent('swipe', {\n            detail: {\n              x: adx > threshold && adx > ady ? -Math.sign(dx) : 0,\n              y: ady > threshold && ady > adx ? -Math.sign(dy) : 0,\n            },\n          }));\n        }\n      }, { passive: true });\n    });\n  },\n  \n  // Get Elements\n  getElements() {\n    return swipeable.elements;\n  }\n};","// Prototype\nObject.setPrototypeOf(NodeList.prototype, Array.prototype);\nObject.setPrototypeOf(HTMLCollection.prototype, Array.prototype);\n\n// Query\nconst query = document.querySelector.bind(document);\nconst queryAll = document.querySelectorAll.bind(document);\nwindow.query = query;\nwindow.queryAll = queryAll;\n\nNode.prototype.query = function query(selector) { return this.querySelector(selector); };\nNode.prototype.queryAll = function queryAll(selector) { return this.querySelectorAll(selector); };\nNodeList.prototype.query = function query(selector) { return this.queryAll(selector)[0]; };\nNodeList.prototype.queryAll = function queryAll(selector) { return this.map(elem => Array.from(elem.queryAll(selector))).flat(); };\n\n// Sibling util\nNode.prototype.sibling = function sibling(query) { return this.siblings(query)[0]; };\nNode.prototype.siblings = function siblings(query) {\n  const elems = query ? this.parentElement.queryAll(query) : this.parentElement.children;\n  return elems.filter(e => this !== e);\n};\n\n// Index util\nNode.prototype.index = function index() {\n  let elem = this;\n  let i = -1;\n  while (elem) { elem = elem.previousElementSibling; i += 1; }\n  return i;\n};\n\n// Trigger events\nNode.prototype.trigger = function trigger(event, init) {\n  this.dispatchEvent(new CustomEvent(event, init));\n};\n\nexport { query, queryAll }\nexport { onDomReady, once, template } from './utils/utils';\nexport { observable } from './utils/intersection-observer';\nexport { swipeable } from './utils/swipeable';","import { query } from 'cantil';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst button = query('button[type=\"submit\"]');\nconst prisionersInput = query('input[name=\"prisioners\"]');\nconst methodInput = query('select');\nconst simulationsInput = query('input[name=\"simulations\"]');\nconst results = query('.results');\nlet orderedBoxes;\n\n// simulation variables\nlet totalPrisioners;\nlet numberOfTries;\nlet boxes;\n\nconst apply = {\n  loop: () => {\n    // loop over prisioners\n    for (let i = 0; i < totalPrisioners; i += 1) {\n      let succeed = false;\n      let position = i;\n      for (let j = 0; j < numberOfTries; j += 1) {\n        position = boxes[position];\n        if (position === i) {\n          succeed = true;\n          break;\n        }\n      }\n      if (!succeed) {\n        return 0;\n      }\n    }\n    return 1;\n  },\n  random: () => {\n    let allPrisionerSucceed = true;\n\n    // loop over prisioners\n    for (let i = 0; i < totalPrisioners; i += 1) {\n      const prisionerBoxes = [...boxes];\n      let prisionerSucceed = false;\n      for (let j = 0; j < numberOfTries; j += 1) {\n        const randomPosition = parseInt(Math.random() * prisionerBoxes.length, 10);\n        prisionerSucceed ||= prisionerBoxes[randomPosition] === i;\n        prisionerBoxes.splice(randomPosition, 1);\n\n        if (prisionerSucceed) break;\n      }\n\n      allPrisionerSucceed &&= prisionerSucceed;\n      if (!allPrisionerSucceed) break;\n    }\n\n    return allPrisionerSucceed;\n  },\n};\n\nconst randomBoxes = () => {\n  const result = orderedBoxes.slice(0);\n  for (let i = result.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n};\n\nconst calc = () => new Promise(resolve => {\n  totalPrisioners = parseInt(prisionersInput.value, 10);\n  numberOfTries = parseInt(totalPrisioners / 2, 10);\n  orderedBoxes = Array.from(Array(totalPrisioners).keys());\n\n  let successCount = 0;\n  for (let i = 0; i < simulationsInput.value; i += 1) {\n    boxes = randomBoxes();\n    successCount += apply[methodInput.value]();\n  }\n\n  resolve(successCount);\n});\n\n// button click\nbutton.onclick = () => {\n  button.disabled = true;\n  const startTime = performance.now();\n\n  calc()\n    .then(successCount => {\n      results.query('.success').innerText = successCount;\n      results.query('.samples').innerText = simulationsInput.value;\n      results.query('.percent').innerText = ((successCount * 100) / simulationsInput.value).toFixed(4);\n      results.query('.performance').innerText = ((performance.now() - startTime) / 1000).toFixed(4);\n\n      button.disabled = false;\n    });\n};\n"]}